<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: validateUtilsAccounts.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: validateUtilsAccounts.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const validator = require('validator');
const InvalidInputError = require("./invalidInputError.js");
const logger = require("../logger.js");
//test from desktop

/**
 * Validate if account data is valid by checking Email, DisplayName, Username and Password.
 * Checks if display and usernames contain only numbers and letters.
 * Check if password meets minimum requirements.
 * 
 * Minimum requirements: 
 * Usernames: 6 characters long, no special characters.
 * Display Name: 4 characters long, no special characters. 
 * 
 * Passwords: 8 characters long, 1 special char.
 * @param {string} email of the account to validate.
 * @param {string} displayName of the account to validate.
 * @param {string} username of pokemon name to validate.
 * @param {string} password of pokemon type to validate.
 * @throws {InvalidInputError} if pokemon Name or Type is invalid.
 * @returns True if data is valid
 * 
 */
 function isAccountValid(email, displayName, username, password) {

    // Validate All Input -- each will throw appropriate exception if it fails
    isEmailValid(email);
    isDisplayNameValid(displayName);
    isUsernameValid(username);
    isPasswordValid(password);

    // if checks pass, return true
    return true;

}
/**
 * Validate if string passed in is an email.
 * @param {string} email to validate 
 * @throws {InvalidInputError} if email format is invalid
 * @returns {boolean} true if email string passed in, in in fact an email.
 */
function isEmailValid(email){

    logger.info("Email is " + email);
    // User validator isEmail(str,[, options]) ** only checks for format
    if (!validator.isEmail(email))
        throw new InvalidInputError("\nEmail format is invalid. Accepted format: xyz@domain.com");

    return true;
}

/**
 * Checks if Display name is only composed of letters and numbers
 * Special characters and empty names are not allowed.
 * @param {string} displayName to validate
 * @throws InvalidInputError if display name does not meet requirements.
 * @returns {boolean} true if display name meets all requirements
 */
function isDisplayNameValid(displayName){
    
    // Check length meets minimum requirements (4) - REDACTED
   // if(displayName.   Q1`ASlength &lt; 4)
    //    throw new InvalidInputError("\nUsername must be at least 4 characters long.");
    
    // Check for special characters
    if(!validator.isAlphanumeric(displayName))
        throw new InvalidInputError("\nSpecial Characters are not allowed");

    // If all checks pass, return true
    return true;
    
}

/**
 * Validates if string of username meets minimum requirements.
 * 
 * Minimum requirements are: name is composed of letters and numbers exclusively.
 * @param {true} username to validate.
 * @throws {InvalidInputError} if username does not meet minimum requirements.
 * @returns true if username meets minimum requirements.
 */
function isUsernameValid(username){

    // Check length meets minimum requirements. - REDACTED
    // if(username.length &lt; 6)
     //   throw new InvalidInputError("\nUsername must be at least 6 characters long");

    // Check for special characters
    if(!validator.isAlphanumeric(username))
        throw new InvalidInputError("\nSpecial Characters are not allowed");

    // If all checks pass, return true
    return true;
}


/**
 * Check if password meets minimum requirements.
 * 
 * Minimum requirements
 * Is at least 8 characters long.
 * Contains one number.
 * Contains one special character.
 * @param {string} password to validate. 
 * @throws {InvalidInputError} if password is not valid.
 * @returns true if password meets minimum requirements
 */
function isPasswordValid(password){

    // Filter for isStrongPassword, 
    strongPasswordOptions = {minLength: 8, minNumbers: 1, minSymbols: 1}

    // If password does not meet strongPasswordOptions criteria, returns false.
    if(!validator.isStrongPassword(password, strongPasswordOptions))
        throw new InvalidInputError("\nPassword is not strong enough: Must be at least 8 characters long, contains 1 number and one special character.");
    
    return true;
}


module.exports ={
    isAccountValid,
    isEmailValid,
    isDisplayNameValid,
    isUsernameValid,
    isPasswordValid,
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="DatabaseError.html">DatabaseError</a></li><li><a href="InvalidInputError.html">InvalidInputError</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addAccount">addAccount</a></li><li><a href="global.html#addBook">addBook</a></li><li><a href="global.html#addNewRecipe">addNewRecipe</a></li><li><a href="global.html#areFieldsValid">areFieldsValid</a></li><li><a href="global.html#areKeyValid">areKeyValid</a></li><li><a href="global.html#close">close</a></li><li><a href="global.html#connectToDatabase">connectToDatabase</a></li><li><a href="global.html#deleteRecipe">deleteRecipe</a></li><li><a href="global.html#deleteRecipeBook">deleteRecipeBook</a></li><li><a href="global.html#getAllAccounts">getAllAccounts</a></li><li><a href="global.html#getAllRecipeBooks">getAllRecipeBooks</a></li><li><a href="global.html#getAllRecipeBooksOfUser">getAllRecipeBooksOfUser</a></li><li><a href="global.html#getCollection">getCollection</a></li><li><a href="global.html#getOneRecipe">getOneRecipe</a></li><li><a href="global.html#getOneRecipeById">getOneRecipeById</a></li><li><a href="global.html#getRecipes">getRecipes</a></li><li><a href="global.html#getRecipesOfOneUser">getRecipesOfOneUser</a></li><li><a href="global.html#getSingleAccount">getSingleAccount</a></li><li><a href="global.html#getSingleRecipeBook">getSingleRecipeBook</a></li><li><a href="global.html#isAccountValid">isAccountValid</a></li><li><a href="global.html#isDisplayNameValid">isDisplayNameValid</a></li><li><a href="global.html#isEmailValid">isEmailValid</a></li><li><a href="global.html#isPasswordValid">isPasswordValid</a></li><li><a href="global.html#isServingsValid">isServingsValid</a></li><li><a href="global.html#isUsernameValid">isUsernameValid</a></li><li><a href="global.html#isValid2">isValid2</a></li><li><a href="global.html#removeAccount">removeAccount</a></li><li><a href="global.html#setCollection">setCollection</a></li><li><a href="global.html#updateBookAddRecipe">updateBookAddRecipe</a></li><li><a href="global.html#updateBookDeleteRecipe">updateBookDeleteRecipe</a></li><li><a href="global.html#updateDisplayName">updateDisplayName</a></li><li><a href="global.html#updatePassword">updatePassword</a></li><li><a href="global.html#updateRecipe">updateRecipe</a></li><li><a href="global.html#updateRecipeBookName">updateRecipeBookName</a></li><li><a href="global.html#updateUsername">updateUsername</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Fri May 19 2023 07:33:16 GMT-0400 (Eastern Daylight Saving Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
